// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/python
{
	"name": "open-spec-trial",
	
	// Docker Compose で PostgreSQL/Redis と一緒に起動
	"dockerComposeFile": "docker-compose.yml",
	"service": "app",
	"workspaceFolder": "/workspaces/open-spec-trial",

	// ポートフォワーディング
	"forwardPorts": [3000, 5173, 5432, 6379],
	"portsAttributes": {
		"3000": { "label": "Backend API" },
		"5173": { "label": "Frontend (Vite)" },
		"5432": { "label": "PostgreSQL" },
		"6379": { "label": "Redis" }
	},

	// コンテナ作成後に依存関係をインストール
	"postCreateCommand": "npm install -g @fission-ai/openspec@latest && npm install && cd client && npm install",

	"customizations": {
		"vscode": {
			"extensions": [
				"bierner.markdown-mermaid"
			]
		}
	}

	// Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.
	// "remoteUser": "root"
}
